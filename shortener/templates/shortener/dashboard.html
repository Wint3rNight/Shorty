{% extends "base.html" %}

{% block content %}
  <h2>Your Links</h2>
  {% if links %}
    <form action="{% url 'shortener:delete_selected' %}" method="post">
        {% csrf_token %}
        <table>
          <thead>
            <tr>
              <th></th>
              <th>Short URL</th>
              <th>Original URL</th>
              <th>Clicks</th>
              <th>Created</th>
              <th>Stats</th>
            </tr>
          </thead>
          <tbody>
            {% for link in links %}
              <tr>
                <td>
                  <input type="checkbox" name="url_ids" value="{{ link.id }}">
                </td>
                <td><a href="/{{ link.short_code }}" target="_blank">/{{ link.short_code }}</a></td>
                <td><a href="{{ link.original_url }}" target="_blank">{{ link.original_url|truncatechars:50 }}</a></td>
                <td>{{ link.click_count }}</td>
                <td>{{ link.created_at|date:"M d, Y" }}</td>
                <td><a href="{% url 'shortener:details' short_code=link.short_code %}">View Stats</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <button type="submit" style="margin-top: 10px;">Delete Selected</button>
    </form>
  {% else %}
    <p>You haven't shortened any links yet. <a href="{% url 'shortener:home' %}">Shorten one now!</a></p>
  {% endif %}
{% endblock %}